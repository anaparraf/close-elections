sheet = "VEICULOS_2024", na = "0")
# View(vs2024)
bairros <- geobr::read_neighborhood() %>%
filter(code_muni == 3550308) %>%
select(code_district, bairros = geom)
warning()
pontos <- vs2022 %>%
select(lat = "LATITUDE", long = "LONGITUDE") %>%
drop_na() %>%
st_as_sf(coords = c('long','lat'), crs = 4269)
ponto
pontos
vs2022
pontos <- vs2022 %>%
select(lat = "LATITUDE", long = "LONGITUDE") %>%
drop_na() %>%
st_as_sf(coords = c('long','lat'), crs = 4269)
vs2022
View(vs2022)
vs2022 %>%
select(lat = "LATITUDE", long = "LONGITUDE")
vs2022 %>%
select(lat = "LATITUDE", long = "LONGITUDE") %>%
drop_na()
vs2022 %>%
select(lat = "LATITUDE", long = "LONGITUDE") %>%
drop_na() %>%
st_as_sf(coords = c('long','lat'), crs = 4269)
pontos <- vs2022 %>%
select(lat = "LATITUDE", long = "LONGITUDE") %>%
mutate(lat = lat %>% as.numeric)
pontos <- vs2022 %>%
select(lat = "LATITUDE", long = "LONGITUDE") %>%
mutate(lat = lat %>% as.numeric())
pontos <- vs2022 %>%
select(lat = "LATITUDE", long = "LONGITUDE") %>%
mutate(lat = lat %>% as.numeric(na.rm = T))
vs2022 %>%
select(lat = "LATITUDE", long = "LONGITUDE") %>%
mutate(lat = lat %>% as.numeric(na.rm = T))
pontos <- vs2022 %>%
select(lat = "LATITUDE", long = "LONGITUDE") %>%
drop_na() %>%
mutate(lat = lat %>% as.numeric(na.rm = T))
vs2022 %>%
select(lat = "LATITUDE", long = "LONGITUDE") %>%
drop_na() %>%
mutate(lat = lat %>% as.numeric(na.rm = T))
vs2022 %>%
select(lat = "LATITUDE", long = "LONGITUDE") %>%
drop_na() %>%
mutate(lat = lat %>% as.numeric(na.rm = T),
long = long %>% as.numeric(na.rm = T))
pontos <- vs2022 %>%
select(lat = "LATITUDE", long = "LONGITUDE") %>%
drop_na() %>%
mutate(lat = lat %>% as.numeric(na.rm = T),
long = long %>% as.numeric(na.rm = T)) %>%
st_as_sf(coords = c('long','lat'), crs = 4269)
pontos <- vs2022 %>%
select(lat = "LATITUDE", long = "LONGITUDE") %>%
drop_na() %>%
mutate(lat = lat %>% as.numeric(na.rm = T),
long = long %>% as.numeric(na.rm = T)) %>%
drop_na() %>%
st_as_sf(coords = c('long','lat'), crs = 4269)
library(readxl)
df.original <- bind_rows(
readxl::read_excel("dados/RMA/rma_2015.xlsx", sheet = "Dados Tratados") %>%
select(data = "Mês de Referência", everything()) %>%
mutate(data = as.Date(data, format = "%d/%m/%Y")) %>%
select(data, municipio = "Município", nome = "Nome do CREAS", RMA = "a1"),
readxl::read_excel("dados/RMA/rma_2017.xlsx", sheet = "Dados Tratados") %>%
select(data = "Mês de Referência", everything()) %>%
mutate(data = as.Date(data, format = "%d-%m-%Y")) %>%
select(data, municipio = "Município", nome = "Nome do CREAS", RMA = "a1"),
readxl::read_excel("dados/RMA/rma_2018.xlsx", sheet = "Dados Tratados") %>%
select(data = "Mês de Referência", municipio = "Município", nome = "Nome do CREAS", RMA = "a1") %>%
mutate(mes = lubridate::day(data),
ano = lubridate::year(data),
data = clock::year_month_day(ano, mes, 1) %>% as.Date()) %>%
select(!c(ano, mes))
)
library(readxl)
library(tidyverse)
library(sf)
library(geobr)
vs2022 <- VeiculosSubtraidos_2024 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2022", na = "0")
vs2023 <- VeiculosSubtraidos_2024 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2023", na = "0")
vs2024 <- VeiculosSubtraidos_2024 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2024", na = "0")
# grafico de subtrações de 2022
bairros <- geobr::read_neighborhood() %>%
filter(code_muni == 3550308) %>%
select(code_district, bairros = geom)
library(readxl)
library(tidyverse)
library(sf)
library(geobr)
vs2022 <- VeiculosSubtraidos_2024 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2022", na = "0")
vs2023 <- VeiculosSubtraidos_2024 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2023", na = "0")
library(readxl)
library(tidyverse)
library(sf)
library(geobr)
vs2022 <- VeiculosSubtraidos_2024 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2022", na = "0")
vs2023 <- VeiculosSubtraidos_2024 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2023", na = "0")
library(readxl)
library(tidyverse)
library(sf)
library(geobr)
vs2022 <- VeiculosSubtraidos_2024 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2022", na = "0")
vs2023 <- VeiculosSubtraidos_2024 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2023", na = "0")
library(readxl)
VeiculosSubtraidos_2024 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2022", na = "0")
View(VeiculosSubtraidos_2024)
library(readxl)
v2022 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2022", na = "0")
View(v2022)
name(v2022)
names(v2022)
names(v2022)[39] <- "latitude"
names(v2022)[40] <- "longitude"
names(v2022)
names(v2022)[33] <- "cidade"
names(v2022)
veiculos <- v2022 %>%
filter(cidade=="S.PAULO")
veiculos <- v2022 %>%
filter(cidade=="S.PAULO")
library(tidyverse)
veiculos <- v2022 %>%
filter(cidade=="S.PAULO")
v_sp <- v2022 %>%
filter(cidade=="S.PAULO")
summary(v_sp)
dim(v_sp)
v2022 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2022", na = "0")
dim(v2022)
# grafico de subtrações de 2022
bairros <- geobr::read_neighborhood() %>%
filter(code_muni == 3550308) %>%
select(code_district, bairros = geom)
bairros
crs(bairros)
st_crs(bairros)
sf::st_crs(bairros)
pontos <- v_sp %>%
select(lat = "latitude", long = "longitude") %>%
drop_na() %>%
# mutate(lat = lat %>% as.numeric(na.rm = T),
#        long = long %>% as.numeric(na.rm = T)) %>%
# drop_na() %>%
st_as_sf(coords = c('long','lat'), crs = 4674)
library(sf)
pontos <- v_sp %>%
select(lat = "latitude", long = "longitude") %>%
drop_na() %>%
# mutate(lat = lat %>% as.numeric(na.rm = T),
#        long = long %>% as.numeric(na.rm = T)) %>%
# drop_na() %>%
st_as_sf(coords = c('long','lat'), crs = 4674)
v_sp <- v2022 %>%
filter(cidade=="S.PAULO")
v2022 %>%
head(5)
v2022 %>%
head(5) %>%
select("id_delegacia" = "ID_DELEGACIA ")
v2022 %>%
head(5)
v2022 %>%
head(5) %>%
select("ID_DELEGACIA ")
v2022 %>%
head(5) %>%
colnames()
v2022 %>%
head(5) %>%
names()
v2022 %>%
head(5) %>%
select(ID_DELEGACIA)
v2022 %>%
head(5) %>%
select("ID_DELEGACIA")
v2022 %>%
head(5) %>%
select(id_delegacia = "ID_DELEGACIA")
v2022 %>%
head(5) %>%
select(id_delegacia = "ID_DELEGACIA",
latitude ="LATITUDE",
longitude="LONGITUDE",
cidade = "CIDADE")
v_sp <- v2022 %>%
filter(cidade=="S.PAULO")
V2022 <- v2022 %>%
select(id_delegacia = "ID_DELEGACIA",
latitude ="LATITUDE",
longitude="LONGITUDE",
cidade = "CIDADE")
v_sp <- v2022 %>%
filter(cidade=="S.PAULO")
View(V2022)
v2022 <- v2022 %>%
select(id_delegacia = "ID_DELEGACIA",
latitude ="LATITUDE",
longitude="LONGITUDE",
cidade = "CIDADE")
remove(V2022)
remove(v2022)
v2022 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2022", na = "0")
v2022 <- v2022 %>%
select(id_delegacia = "ID_DELEGACIA",
latitude ="LATITUDE",
longitude="LONGITUDE",
cidade = "CIDADE")
v_sp <- v2022 %>%
filter(cidade=="S.PAULO")
pontos <- v_sp %>%
select(lat = "latitude", long = "longitude") %>%
drop_na() %>%
# mutate(lat = lat %>% as.numeric(na.rm = T),
#        long = long %>% as.numeric(na.rm = T)) %>%
# drop_na() %>%
st_as_sf(coords = c('long','lat'), crs = 4674)
pontos <- v_sp %>%
select(lat = "latitude", long = "longitude") %>%
drop_na() %>%
mutate(lat = lat %>% as.numeric(na.rm = T),
long = long %>% as.numeric(na.rm = T)) %>%
# drop_na() %>%
st_as_sf(coords = c('long','lat'), crs = 4674)
pontos <- v_sp %>%
select(lat = "latitude", long = "longitude") %>%
drop_na() %>%
mutate(lat = lat %>% as.numeric(na.rm = T),
long = long %>% as.numeric(na.rm = T)) %>%
drop_na() %>%
st_as_sf(coords = c('long','lat'), crs = 4674)
ggplot()+
geom_sf(data=pontos)
ggplot()+
geom_sf(data=pontos)
ggplot()+
geom_sf(data=bairros)
ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos)
ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="pink",alpha=.3)
ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="pink",alpha=.003)
ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="pink",alpha=.09)
library(readxl)
library(tidyverse)
library(sf)
v2022 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2022", na = "0")
names(v2022)
names(v2022)[39] <- "latitude"
names(v2022)[40] <- "longitude"
names(v2022)[40] <- "longitude"
names(v2022)[33] <- "cidade"
names(v2022)
v_sp <- v2022 %>%
filter(cidade=="S.PAULO")
summary(v_sp)
pontos <- v_sp %>%
select(lat = "latitude", long = "longitude") %>%
drop_na() %>%
mutate(lat = lat %>% as.numeric(na.rm = T),
long = long %>% as.numeric(na.rm = T)) %>%
drop_na() %>%
st_as_sf(coords = c('long','lat'), crs = 4674)
ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="pink",alpha=.09)
ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="pink",alpha=.09, size = 0.8)
ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="pink",alpha=.09, size = 0.5)
ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="pink",alpha=.09, size = 0.6)
ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="blue",alpha=.09, size = 0.6)
graf_sp <- ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="lightblue",alpha=.09, size = 0.6)
remove(v2022)
View(v_sp)
# municipio de sao paulo
names(v2022)[5] <- "municipio"
v2022 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2022", na = "0")
names(v2022)[39] <- "latitude"
names(v2022)[40] <- "longitude"
names(v2022)[33] <- "cidade"
# municipio de sao paulo
names(v)[5] <- "municipio"
# municipio de sao paulo
names(v2022)[5] <- "municipio"
muni_sp <- v2022 %>%
filter(municipio=="S.PAULO")
summary(muni_sp)
dim(muni_sp)
dim(v_sp)
graf_sp <- ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="lightblue",alpha=.09, size = 0.6, label='oi')
graf_sp <- ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="lightblue",alpha=.09, size = 0.6)+
ggtitle(oi)
ggtitle("oi)
graf_sp <- ggplot()+
geom_sf(data=pontos, color="lightblue",alpha=.09, size = 0.6)+
graf_sp <- ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="lightblue",alpha=.09, size = 0.6)+
ggtitle("oi)
graf_sp <- ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="lightblue",alpha=.09, size = 0.6)+
# pontos veiculos em cidade sp
pontos <- v_sp %>%
select(lat = "latitude", long = "longitude") %>%
drop_na() %>%
mutate(lat = lat %>% as.numeric(na.rm = T),
long = long %>% as.numeric(na.rm = T)) %>%
drop_na() %>%
st_as_sf(coords = c('long','lat'), crs = 4674)
graf_sp <- ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="lightblue",alpha=.09, size = 0.6)+
ggsave("output/graf_cidade_sp.png",
graf_sp,
height=20,width = 20,dpi=600)
# municipio de sao paulo
names(v2022)[5] <- "municipio"
muni_sp <- v2022 %>%
filter(municipio=="S.PAULO")
summary(muni_sp)
dim(muni_sp)  #118934
dim(v_sp)  #83243
pontos2 <- muni_sp %>%
select(lat = "latitude", long = "longitude") %>%
drop_na() %>%
mutate(lat = lat %>% as.numeric(na.rm = T),
long = long %>% as.numeric(na.rm = T)) %>%
drop_na() %>%
st_as_sf(coords = c('long','lat'), crs = 4674)
graf_sp <- ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos2, color="blue",alpha=.09, size = 0.6)
graf_sp <- ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="lightblue",alpha=.09, size = 0.6)+
graf_sp <- ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="lightblue",alpha=.09, size = 0.6)
graf_sp <- ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="lightblue",alpha=.09, size = 0.6)
graf_sp
graf_sp <- ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos, color="blue",alpha=.09, size = 0.6)
graf_sp
ggplot()+
geom_sf(data=pontos, color="blue",alpha=.09, size = 0.6)+
geom_sf(data=bairros)
graf_muni_sp <- ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos2, color="lightblue",alpha=.09, size = 0.6)
graf_muni_sp
graf_muni_sp <- ggplot()+
geom_sf(data=bairros)+
geom_sf(data=pontos2, color="blue",alpha=.09, size = 0.6)
graf_muni_sp
ggsave("output/graf_cidade_sp.png",
graf_sp,
height=20,width = 20,dpi=600)
ggsave("C:/Users/anapa/Insper Data/Insper Data 2024.1/graf_cidade_sp.png",
graf_sp,
height=20,width = 20,dpi=600)
names(v_sp,BAIRRO)
names(v_sp,'BAIRRO')
table(v_sp$BAIRRO)
toupper(v_sp$BAIRRO)
table(v_sp$BAIRRO)
toupper(v_sp$BAIRRO) %>%
table(v_sp$BAIRRO)
toupper(v_sp$BAIRRO) %>%
oi <- table(v_sp$BAIRRO)
oi
oi <- toupper(v_sp$BAIRRO) %>%
table(v_sp$BAIRRO)
oi
toupper(v_sp$BAIRRO) %>%
table(v_sp$BAIRRO)
table(v_sp$BAIRRO)
toupper(v_sp$BAIRRO) %>%
table(v_sp$BAIRRO)
toupper(v_sp$BAIRRO) %>%
table(v_sp$BAIRRO)
toupper(v_sp$BAIRRO) %>%
table(v_sp$BAIRRO)
toupper(v_sp$BAIRRO)
v_sp <- toupper(v_sp$BAIRRO)
v_sp
# base com cidade sao paulo
v_sp <- v2022 %>%
filter(cidade=="S.PAULO")
View(v2022)
O)
table(v_sp$BAIRRO)
# base com cidade sao paulo
v_sp <- v2022 %>%
filter(cidade=="S.PAULO")
table(v_sp$BAIRRO)
library(readxl)
library(tidyverse)
library(sf)
v2022 <- read_excel("C:/Users/anapa/Insper Data/Insper Data 2024.1/VeiculosSubtraidos_2024.xlsx",
sheet = "VEICULOS_2022", na = "0")
names(v2022)[39] <- "latitude"
names(v2022)[40] <- "longitude"
names(v2022)[33] <- "cidade"
# base com cidade sao paulo
v_sp <- v2022 %>%
filter(cidade=="S.PAULO")
itaim_bibi <- v_sp %>%
filter(BAIRRO=="Itaim Bibi",BAIRRO=="ITAIM BIBI")
itaim_bibi
itaim_bibi
View(itaim_bibi)
itaim_bibi <- v_sp %>%
filter(BAIRRO=="Itaim Bibi") +
filter(BAIRRO=="ITAIM BIBI")
itaim_bibi <- v_sp %>%
filter(BAIRRO=="Itaim Bibi") +
filter(BAIRRO=="ITAIM BIBI")
table(v_sp$BAIRRO)
itaim_bibi <- v_sp %>%
filter(BAIRRO=="Itaim Bibi")
itaim
itaim_bibi
itaim_bibi2 <- v_sp %>%
filter(BAIRRO=="ITAIM BIBI")
teste <- itaim_bibi+itaim_bibi2
teste <-  rbind(itaim_bibi,itaim_bibi2)
teste
distrito <- read_sf("geosampa/distrito/SIRGAS_SHP_distrito.shp") %>%
st_set_crs("epsg:31983")
View(bairros)
bairros
bairros
# filtra bibi no geobr
bairros <- geobr::read_neighborhood() %>%
filter(code_muni == 3550308) %>%
select(code_district, bairros = geom)
View(bairros)
> version
version
packageStatus()
install.packages("read.dbc")
install.packages("electionsBrR")
R.Version()
install.packages("electionsBR")
packageVersion(“electionsBR”)
packageVersion("electionsBR")
df <- elections_tse(year = 2002, type = "candidate")
# df <- elections_tse(year = 2002, type = "candidate")
# df <- elections_tse(year = 2002, type = "candidate")
# df <- elections_tse(year = 2002, type = "candidate")
# df <- elections_tse(year = 2002, type = "candidate")
#install.packages("electionsBrR")
library(electionsBR)
df <- elections_tse(year = 2002, type = "candidate")
df <- elections_tse(year = 2002, type = "candidate")
df <- elections_tse(year = 2002, type = "candidate")
View(df)
df_sp <- elections_tse(year = 2000, type = "vote_mun_zone", uf = "SP")
View(df_sp)
install.packages('haven')
setwd("C:/Users/anapa/Insper Data/Insper Data 2024.1/Close elections")
#install.packages('haven')
library(haven)
data <- read_dta('womenservices.dta')
View(data)
